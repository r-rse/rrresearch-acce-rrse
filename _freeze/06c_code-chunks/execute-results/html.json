{
  "hash": "c70732b874fec358b14cedbc7e65f71a",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Code Blocks, Figures & Tables\"\nsubtitle: \"Creating a Scientific Report\"\n---\n\n::: {.cell}\n\n:::\n\n\n> **R code blocks execute code.**\n\nCode blocks that use braces around the language name (e.g. \\`\\`\\`{r}) are executable, and will be run by Quarto during render.\n\nThey can be used as a means to **perform computations**, **render R output like text, tables, or graphics into documents** or to simply **display code for illustration** without evaluating it.\n\n## **Inserting new blocks**\n\nYou can quickly insert an [R code block](https://quarto.org/docs/computations/r.html) with:\n\n-   the keyboard shortcut **`Ctrl + Alt + I`** (**OS X: `Cmd + Option + I`**)\n-   the Add Block button in the RStudio toolbar (![](assets/img/insert_code_block.png){width=\"25\"}).\n-   In the Visual Editor: **Insert \\> Any \\> ...**\n-   by typing the block delimiters ```` ```{r} and ``` ````.\n\n## **Block notation**\n\n**block notation in `.rmd`**\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\nprint('hello world!')\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hello world!\"\n```\n\n\n:::\n:::\n\n\n**rendered html code and output**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint('hello world!')\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hello world!\"\n```\n\n\n:::\n:::\n\n\n### Block labels\n\nBlocks **can be labelled with block names, names must be unique**. This can be useful for debugging as well as for referencing blocks within text.\n\nYou’ll note that we are using **some special comments starting with `#|`** at the top of the code block. These are used to define **cell level options**, including **labels**, **execution and display options** and **output cross-referencing**\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: block-name\nprint('hello world!')\n```\n````\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hello world!\"\n```\n\n\n:::\n:::\n\n\n## **Block execution options**\n\nThere are a **wide variety of options available for customizing output from executed code**. All of these options can be specified either globally (in the document front-matter -YAML header-) or per code-block.\n\n**Block options control how code and outputs are evaluated and presented.**\n\nStandard block options include:\n\n| Option    | Description                                                                                                                                                                                       |\n|------------------------|------------------------------------------------|\n| `eval`    | Evaluate the code chunk (if `false`, just echos the code into the output).                                                                                                                        |\n| `echo`    | Include the source code in output                                                                                                                                                                 |\n| `output`  | Include the results of executing the code in the output (`true`, `false`, or `asis` to indicate that the output is raw markdown and should not have any of Quarto’s standard enclosing markdown). |\n| `warning` | Include warnings in the output.                                                                                                                                                                   |\n| `error`   | Include errors in the output (note that this implies that errors executing code will not halt processing of the document).                                                                        |\n| `include` | Catch all for preventing any output (code or results) from being included (e.g. `include: false` suppresses all output from the code block).                                                      |\n\n### Controlling code display with `echo`\n\n**block notation in `.rmd`**\n\n````         \n```{r}\n#| label: hide-code\n#| echo: false\nprint('hello world!')\n```\n````\n\n**rendered html code and output**\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"hello world!\"\n```\n\n\n:::\n:::\n\n\n### Controlling code evaluation with `eval`\n\n**block notation in `.rmd`**\n\n\n::: {.cell}\n\n````{.cell-code}\n```{{r}}\n#| label: dont-eval\n#| eval: false\nprint('hello world!')\n```\n````\n:::\n\n\n**rendered html code and output**\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint('hello world!')\n```\n:::\n\n\n## Add a Summary Statistics section\n\nLet's move on to start introducing our data and some of the initial summary statistics plots we've generated. So we'll now need to start introducing executable code to our document.\n\n### Add `analysis.R` setup section\n\nWe'll start by **adding the top section of our `analysis.R` script to the report into a `setup` code chunk**.\n\nLet's include:\n\n-   the code block that loads the necessary packages,\n\n-   reads in the data\n\n-   subsets the data\n\n-   growth forms the growth form levels\n\nWe'll also use some code options to control the display and output of the code block:\n\n-   `label: setup` to label the code block with the name `setup`\n-   `code-fold: true` to fold the code block by default\n-   `message: false` to suppress messages from the code block. This is useful for hiding messages from loading packages and reading in data.\n\nYour code chunk should look something like this:\n\n```{{r}}\n#| label: setup\n#| code-fold: true\n#| message: false\n## Setup ----\n# Load libraries\nlibrary(dplyr)\nlibrary(ggplot2)\n# Load data\nindividual <- readr::read_csv(\n  here::here(\"data\", \"individual.csv\")\n) %>%\n  select(stem_diameter, height, growth_form)\n\n## Subset analysis data ----\nanalysis_df <- individual %>%\n  filter(complete.cases(.), growth_form != \"liana\")\n\n## Order growth form levels\ngf_levels <- table(analysis_df$growth_form) %>%\n  sort() %>%\n  names()\nanalysis_df <- analysis_df %>%\n  mutate(growth_form = factor(growth_form,\n    levels = gf_levels\n  ))\n\n```\n\n### Add some text with in-line code\n\nLet's also add some descriptive text to describe the data that will calculate and report dataset characteristics using inline code.\n\n```         \nThe final data set contains a total of **11626**\n```\n\n### Print the dataset\n\nIt's useful for a reader to have an idea of what data they are working with. One way to do this is to just print the contents of our tibble to the report.\n\nQuarto provides additional ways to display data natively. One way is to format printed tibbles into an HTML table with paging for row and column overflow, allowing a user to navigate the entire dataset!\n\nTo do this, first we print our dataset in a code block:\n\n```{{r}}\n#| echo: false\n#| label: tbl-print\nanalysis_df\n```\n\nThen we add option `df-print: paged` to the document front matter to set the default display of data frames to paged.\n\nOur document should now look something like this:\n\n````         \n---\ntitle: \"Analysis of NEON Woody plant vegetation structure data\"\nsubtitle: \"ACCE DTP course\"\nauthor: \"Anna Krystalli\"\ndate: \"2024-03-19\"\nformat:\n  html:\n    toc: true\n    theme: minty\n    highlight-style: dracula\n    df-print: paged\neditor: visual\n---\n\n## Background\n\n![](data-raw/wood-survey-data-master/neon-logo.png){width=\"200\"}\n\nThe [NEON Woody plant vegetation structure dataset](https://data.neonscience.org/data-products/DP1.10098.001) contains **structure measurements, including height, canopy diameter, and stem diameter, as well as mapped position of individual woody plants across the survey area.**\n\nThis data product contains the quality-controlled, native sampling resolution data from in-situ measurements of live and standing dead woody individuals and shrub groups, from all terrestrial NEON sites with qualifying woody vegetation. With some modifications, this protocol adopts guidelines established by the U.S. Forest Service (2012) for measuring tree species. The exact measurements collected per individual depend on growth form, and these measurements are focused on enabling biomass and productivity estimation, estimation of shrub volume and biomass, and calibration / validation of multiple NEON airborne remote-sensing data products.\n\nOur analyses focus on the **relationship between individual stem height and diameter** and how that relationship **varies across growth forms**.\n\n### Data Preparation\n\nData was prepared for analysis by:\n\n- Compiling all individual raw data files into a single table. \n- Merging individual data with plot level data and geolocating individuals.\n\nThe data preparation steps are contained in the `data-raw/individuals.R` script.\n\n## Summary statistics\n\nPrepared data were also subset to columns of interest `stem_diameter`, `height` and `growth_form` and records where `growth_form` values were not `\"liana\"` or missing.\n\n```{{r}}\n#| label: setup\n#| code-fold: true\n#| message: false\n## Setup ----\n# Load libraries\nlibrary(dplyr)\nlibrary(ggplot2)\n# Load data\nindividual <- readr::read_csv(\n  here::here(\"data\", \"individual.csv\")\n) %>%\n  select(stem_diameter, height, growth_form)\n\n## Subset analysis data ----\nanalysis_df <- individual %>%\n  filter(complete.cases(.), growth_form != \"liana\")\n\n## Order growth form levels\ngf_levels <- table(analysis_df$growth_form) %>%\n  sort() %>%\n  names()\nanalysis_df <- analysis_df %>%\n  mutate(growth_form = factor(growth_form,\n    levels = gf_levels\n  ))\n```\n\nThe final data set contains a total of **11626**\n\n```{{r}}\n#| echo: false\n#| label: tbl-print\nanalysis_df\n```\n````\n\nAnd if we render the report, we will see our taxon dataset printed as a paged table.\n\n![](assets/img/qmd-summary.png)\n\n## Add Figures\n\nLet's now go ahead and add the initial exploratory plots we've generated in `analysis.R` to the report. We'll also use this opportunity to introduce output cross-referencing.\n\n::: callout-tip\n## Cross referencing code block output\n\nA really useful feature for Scientific Writing of Quarto is the **ability to cross-reference code blocks and their outputs** through the use of special labels and referencing notation. See more about [cross-referencing](https://quarto.org/docs/authoring/cross-references.html).\n:::\n\n### Add a plot of order counts\n\nWe'll start by adding a plot of the distribution of sample occurrence counts across growth forms in the dataset.\n\nLet's add the `ggplot` code we generated for that plot to the report in a new code block with the folowing code block options:\n\n\\- **`echo: false`** to suppress the code from being displayed in the output.\n\n\\- **`label: fig-growth-form-counts`** to label the code block with the name `fig-growth-form-counts`. This will allow us to reference the plot in the text but it's very important to use the prefix `fig-` in the label name.\n\n\\- **`fig-cap: \"Distribution of individual counts across growth forms.\"`** to add a caption to the plot. This is also necessary for cross referencing the output of the cell.\n\n```{{r}}\n#| echo: false\n#| label: fig-growth-form-counts\n#| fig-cap: \"Distribution of individual counts across growth forms.\"\n\nanalysis_df %>%\n  ggplot(aes(\n    y = growth_form, colour = growth_form,\n    fill = growth_form\n  )) +\n  geom_bar(alpha = 0.5, show.legend = FALSE)\n\n\n```\n\nwhich should render to:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Distribution of individual counts across growth forms.](06c_code-chunks_files/figure-html/fig-growth-form-counts-1.png){#fig-growth-form-counts width=672}\n:::\n:::\n\n\nNote how the **special label introduces a figure number to the figure caption.**\n\nWe can **use the same label to reference the plot in the text**, using the **reference notation `@`**. For example, we can then write the following markdown text below the code block:\n\n```         \n@fig-growth-form-counts shows the distribution of individual counts across growth forms in the dataset.\n```\n\nwhich renders to the following text:\n\n@fig-growth-form-counts shows the distribution of individual counts across growth forms in the dataset.\n\n### Add plot of height and stem_diameter distribution\n\n\nLet's also add the faceted exploratory plots we generated in `analysis.R` to the report. These are the violin plots of the log distribution of height and stem_diameter across growth forms.\n\nLet's add the code for both plots to a new code block with the following code block options:\n\n\\- **`echo: false`** to suppress the code from being displayed in the output.\n\n\\- **`label: fig-violin-plots`** to label the code block with the name `fig-violin-plots`.\n\n\\- **`fig-cap: \"Distribution of log stem_diameter and log height across growth forms\"`** to add a caption to the plot.\n\n\n\n```{{r}}\n#| echo: false\n#| label: fig-violin-plots\n#| fig-cap: \"Distribution of log stem_diameter and log height across growth forms\"\nanalysis_df %>%\n  tidyr::pivot_longer(\n    cols = c(stem_diameter, height),\n    names_to = \"var\",\n    values_to = \"value\"\n  ) %>%\n  ggplot(aes(\n    x = log(value), y = growth_form,\n    colour = growth_form, fill = growth_form\n  )) +\n  geom_violin(alpha = 0.5, trim = TRUE, show.legend = FALSE) +\n  geom_boxplot(alpha = 0.7, show.legend = FALSE) +\n  facet_grid(~var) +\n  theme_linedraw()\n\n```\n\nWhich should render to:\n\n\n::: {.cell}\n::: {.cell-output-display}\n![Distribution of log 10 stem diameter and log height across growth forms](06c_code-chunks_files/figure-html/fig-violin-plots-1.png){#fig-violin-plots width=672}\n:::\n:::\n\n\nAgain, we can see that **Quarto has generated a figure number** and the label to reference the plot in the text, so let's add the following markdown below the code block:\n\n``` md\n@fig-violin-plots shows the log distribution of stem diameter and log height across growth forms.\n```\n\nwhich will render to:\n\n@fig-violin-plots shows the log distribution of stem diameter and log height across growth forms.\n\nYou report should now look a bit like:\n\n````         \n---\ntitle: \"Analysis of NEON Woody plant vegetation structure data\"\nsubtitle: \"ACCE DTP course\"\nauthor: \"Anna Krystalli\"\ndate: \"2024-03-19\"\nformat:\n  html:\n    toc: true\n    theme: minty\n    highlight-style: dracula\n    df-print: paged\neditor: visual\n---\n\n## Background\n\n![](data-raw/wood-survey-data-master/neon-logo.png){width=\"200\"}\n\nThe [NEON Woody plant vegetation structure dataset](https://data.neonscience.org/data-products/DP1.10098.001) contains **structure measurements, including height, canopy diameter, and stem diameter, as well as mapped position of individual woody plants across the survey area.**\n\nThis data product contains the quality-controlled, native sampling resolution data from in-situ measurements of live and standing dead woody individuals and shrub groups, from all terrestrial NEON sites with qualifying woody vegetation. With some modifications, this protocol adopts guidelines established by the U.S. Forest Service (2012) for measuring tree species. The exact measurements collected per individual depend on growth form, and these measurements are focused on enabling biomass and productivity estimation, estimation of shrub volume and biomass, and calibration / validation of multiple NEON airborne remote-sensing data products.\n\nOur analyses focus on the **relationship between individual stem height and diameter** and how that relationship **varies across growth forms**.\n\n### Data Preparation\n\nData was prepared for analysis by:\n\n- Compiling all individual raw data files into a single table. \n- Merging individual data with plot level data and geolocating individuals.\n\nThe data preparation steps are contained in the `data-raw/individuals.R` script.\n\n## Summary statistics\n\nPrepared data were also subset to columns of interest `stem_diameter`, `height` and `growth_form` and records where `growth_form` values were not `\"liana\"` or missing.\n\n```{{r}}\n#| label: setup\n#| code-fold: true\n#| message: false\n## Setup ----\n# Load libraries\nlibrary(dplyr)\nlibrary(ggplot2)\n# Load data\nindividual <- readr::read_csv(\n  here::here(\"data\", \"individual.csv\")\n) %>%\n  select(stem_diameter, height, growth_form)\n\n## Subset analysis data ----\nanalysis_df <- individual %>%\n  filter(complete.cases(.), growth_form != \"liana\")\n\n## Order growth form levels\ngf_levels <- table(analysis_df$growth_form) %>%\n  sort() %>%\n  names()\nanalysis_df <- analysis_df %>%\n  mutate(growth_form = factor(growth_form,\n    levels = gf_levels\n  ))\n```\n\nThe final data set contains a total of **11626**\n\n```{{r}}\n#| echo: false\n#| label: tbl-print\nanalysis_df\n```\n\n\n```{{r}}\n#| echo: false\n#| label: fig-growth-form-counts\n#| fig-cap: \"Distribution of individual counts across growth forms.\"\n\nanalysis_df %>%\n  ggplot(aes(\n    y = growth_form, colour = growth_form,\n    fill = growth_form\n  )) +\n  geom_bar(alpha = 0.5, show.legend = FALSE)\n\n```\n\n@fig-growth-form-counts shows the distribution of individual counts across growth forms in the dataset.\n\n```{{r}}\n#| echo: false\n#| label: fig-violin-plots\n#| fig-cap: \"Distribution of log stem_diameter and log height across growth forms\"\nanalysis_df %>%\n  tidyr::pivot_longer(\n    cols = c(stem_diameter, height),\n    names_to = \"var\",\n    values_to = \"value\"\n  ) %>%\n  ggplot(aes(\n    x = log(value), y = growth_form,\n    colour = growth_form, fill = growth_form\n  )) +\n  geom_violin(alpha = 0.5, trim = TRUE, show.legend = FALSE) +\n  geom_boxplot(alpha = 0.7, show.legend = FALSE) +\n  facet_grid(~var) +\n  theme_linedraw()\n```\n\n@fig-violin-plots shows the log distribution of stem diameter and log height across growth forms.\n\n````\n\n## Adding tables\n\n### Add an Analysis section\n\nCreate a new section in the report called **Analysis** and add a subsection called **Relationship between log height and stem diameter**.\n\nUnder this section write a sentence about the overall analysis we performed.\n\n### Fit linear model\n\nNext add the code to create the overall linear model in a new code chunck.\n\n```{{r}}\nlm_overall <- lm(\n  log(stem_diameter) ~ log(height),\n  analysis_df\n)\n```\n\nwhich renders to and outputs:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlm_overall <- lm(\n  log(stem_diameter) ~ log(height),\n  analysis_df\n)\n```\n:::\n\n\nLet's now add two code chunks to produce the results tables from our linear model.\n\nWe'll use chunk options to control the display of the code and output:\n\n-   **`echo: false`** to suppress the code from being displayed in the output.\n-   **`tbl-cap: \"Overall model evaluation\"`** to add a caption to the table which can be cross-reference. Because this is a table, the caption **must begin with the prefix `tbl-`**.\n-   **`label: tbl-overall-glance`** to label the code block with the name `tbl-overall-glance`.\n\nWe'll also add some additional code using package `gt` to format the tables for display.\n\nWe'll pipe the ouput of `broom::glance()` to `gt()` and use `fmt_number()` to format numbers in the table to 2 decimal places.\n\n```{{r}}\n#| echo: false\n#| tbl-cap: \"Overall model evaluation\"\n#| label: tbl-overall-glance\nlibrary(gt)\nlm_overall |> \n  broom::glance() |> \n  gt() |>\n  fmt_number(decimals = 2)\n```\n\nwhich renders to:\n\n\n::: {#tbl-overall-glance .cell tbl-cap='Overall model evaluation'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"zwopcbpirr\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#zwopcbpirr table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#zwopcbpirr thead, #zwopcbpirr tbody, #zwopcbpirr tfoot, #zwopcbpirr tr, #zwopcbpirr td, #zwopcbpirr th {\n  border-style: none;\n}\n\n#zwopcbpirr p {\n  margin: 0;\n  padding: 0;\n}\n\n#zwopcbpirr .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#zwopcbpirr .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zwopcbpirr .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zwopcbpirr .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zwopcbpirr .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zwopcbpirr .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zwopcbpirr .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zwopcbpirr .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zwopcbpirr .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#zwopcbpirr .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#zwopcbpirr .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zwopcbpirr .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zwopcbpirr .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zwopcbpirr .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zwopcbpirr .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zwopcbpirr .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#zwopcbpirr .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#zwopcbpirr .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#zwopcbpirr .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zwopcbpirr .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#zwopcbpirr .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zwopcbpirr .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zwopcbpirr .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zwopcbpirr .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zwopcbpirr .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zwopcbpirr .gt_left {\n  text-align: left;\n}\n\n#zwopcbpirr .gt_center {\n  text-align: center;\n}\n\n#zwopcbpirr .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zwopcbpirr .gt_font_normal {\n  font-weight: normal;\n}\n\n#zwopcbpirr .gt_font_bold {\n  font-weight: bold;\n}\n\n#zwopcbpirr .gt_font_italic {\n  font-style: italic;\n}\n\n#zwopcbpirr .gt_super {\n  font-size: 65%;\n}\n\n#zwopcbpirr .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#zwopcbpirr .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#zwopcbpirr .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#zwopcbpirr .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#zwopcbpirr .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#zwopcbpirr .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#zwopcbpirr .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"r.squared\">r.squared</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"adj.r.squared\">adj.r.squared</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"sigma\">sigma</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df\">df</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"logLik\">logLik</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"AIC\">AIC</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"BIC\">BIC</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"deviance\">deviance</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"df.residual\">df.residual</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"nobs\">nobs</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"r.squared\" class=\"gt_row gt_right\">0.68</td>\n<td headers=\"adj.r.squared\" class=\"gt_row gt_right\">0.68</td>\n<td headers=\"sigma\" class=\"gt_row gt_right\">0.49</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">24,613.48</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\">0.00</td>\n<td headers=\"df\" class=\"gt_row gt_right\">1.00</td>\n<td headers=\"logLik\" class=\"gt_row gt_right\">−8,132.31</td>\n<td headers=\"AIC\" class=\"gt_row gt_right\">16,270.62</td>\n<td headers=\"BIC\" class=\"gt_row gt_right\">16,292.70</td>\n<td headers=\"deviance\" class=\"gt_row gt_right\">2,757.58</td>\n<td headers=\"df.residual\" class=\"gt_row gt_right\">11,624.00</td>\n<td headers=\"nobs\" class=\"gt_row gt_right\">11,626.00</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nNote that Quarto has generated a table number for the table caption, this time prefixed by **Table**\n\nWe'll use a similar approach to create a table of the model coefficients using `broom::tidy()`.\n\nThis time, we will also use `tab_style_body()` to highlight significant p-values in the table by formatting any value less than 0.05 as bold.\n\n```{{r}}\n#| echo: false\n#| tbl-cap: \"Overall model coefficents\"\n#| label: tbl-overall-tidy\nlibrary(gt)\nlm_overall |> broom::tidy() |> \n  gt() |>\n  fmt_number(decimals = 4) |>\n  tab_style_body(\n    columns = \"p.value\",\n    style = cell_text(weight = \"bold\"),\n    fn = function(x) x < 0.05\n  )\n```\n\nThis renders to:\n\n\n::: {#tbl-overall-tidy .cell tbl-cap='Overall model coefficents'}\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"mgosnzebrv\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#mgosnzebrv table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#mgosnzebrv thead, #mgosnzebrv tbody, #mgosnzebrv tfoot, #mgosnzebrv tr, #mgosnzebrv td, #mgosnzebrv th {\n  border-style: none;\n}\n\n#mgosnzebrv p {\n  margin: 0;\n  padding: 0;\n}\n\n#mgosnzebrv .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#mgosnzebrv .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#mgosnzebrv .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#mgosnzebrv .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#mgosnzebrv .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#mgosnzebrv .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#mgosnzebrv .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#mgosnzebrv .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#mgosnzebrv .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#mgosnzebrv .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#mgosnzebrv .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#mgosnzebrv .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#mgosnzebrv .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#mgosnzebrv .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#mgosnzebrv .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mgosnzebrv .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#mgosnzebrv .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#mgosnzebrv .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#mgosnzebrv .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mgosnzebrv .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#mgosnzebrv .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mgosnzebrv .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#mgosnzebrv .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mgosnzebrv .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#mgosnzebrv .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#mgosnzebrv .gt_left {\n  text-align: left;\n}\n\n#mgosnzebrv .gt_center {\n  text-align: center;\n}\n\n#mgosnzebrv .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#mgosnzebrv .gt_font_normal {\n  font-weight: normal;\n}\n\n#mgosnzebrv .gt_font_bold {\n  font-weight: bold;\n}\n\n#mgosnzebrv .gt_font_italic {\n  font-style: italic;\n}\n\n#mgosnzebrv .gt_super {\n  font-size: 65%;\n}\n\n#mgosnzebrv .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#mgosnzebrv .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#mgosnzebrv .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#mgosnzebrv .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#mgosnzebrv .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#mgosnzebrv .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#mgosnzebrv .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"term\">term</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"estimate\">estimate</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"std.error\">std.error</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"statistic\">statistic</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"p.value\">p.value</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">(Intercept)</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.5609</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0145</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">38.6800</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\" style=\"font-weight: bold;\">0.0000</td></tr>\n    <tr><td headers=\"term\" class=\"gt_row gt_left\">log(height)</td>\n<td headers=\"estimate\" class=\"gt_row gt_right\">0.9439</td>\n<td headers=\"std.error\" class=\"gt_row gt_right\">0.0060</td>\n<td headers=\"statistic\" class=\"gt_row gt_right\">156.8869</td>\n<td headers=\"p.value\" class=\"gt_row gt_right\" style=\"font-weight: bold;\">0.0000</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nFinally let's add the code to create a plot of the relationship between stem diameter and log height across all data.\n\n```{{r}}\n#| echo: false\n#| fig-cap: \"Relationship between stem diameter and height across all data.\"\n#| label: fig-overall-lm\nanalysis_df %>%\n  ggplot(aes(x = log(height), y = log(stem_diameter))) +\n  geom_point(alpha = 0.2) +\n  geom_smooth(method = \"lm\") +\n  xlab(\"Log of height (m)\") +\n  ylab(\"Log of stem diameter (cm)\") +\n  theme_linedraw()\n\n```\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![Relationship between stem diameter and height across all data.](06c_code-chunks_files/figure-html/fig-overall-lm-1.png){#fig-overall-lm width=672}\n:::\n:::\n\n\nand some text that references all three outputs below:\n\n``` md\nSee @fig-overall-lm, @tbl-overall-glance and @tbl-overall-tidy for results.\n```\n\nSee @fig-overall-lm, @tbl-overall-glance and @tbl-overall-tidy for results.\n\n### Add Growth form level analysis\n\nUsing the same approaches we learned above, add a new section called **Growth form level analysis** and add the code and outputs associated with the growth form  level analysis.\n\nHere's what my section looks like:\n\n````         \n### Growth form level analysis\n\nWe also fit a model with an interaction term with growth form included.\n\n```{{r}}\nlm_growth <- lm(\n  log(stem_diameter) ~ log(height) * growth_form,\n  analysis_df\n)\n```\n\n```{{r}}\n#| echo: false\n#| tbl-cap: \"Growth Form interaction model evaluation\"\n#| label: tbl-growth-glance\nlibrary(gt)\nlm_growth |> broom::glance() |> gt() |>\n  fmt_number(decimals = 2)\n```\n\n```{{r}}\n#| echo: false\n#| tbl-cap: \"Growth Form interaction model coefficents\"\n#| label: tbl-growth-tidy\nlibrary(gt)\nlm_growth |> broom::tidy() |> gt() |>\n  fmt_number(decimals = 4) |>\n  tab_style_body(\n    columns = \"p.value\",\n    style = cell_text(weight = \"bold\"),\n    fn = function(x) x < 0.05\n  )\n```\n\n\n```{{r}}\n#| echo: false\n#| fig-cap: \"Relationship between stem diameter and height across growth forms.\"\n#| label: fig-growth-formlm\nanalysis_df %>%\n  ggplot(aes(x = log(height), y = log(stem_diameter), colour = growth_form)) +\n  geom_point(alpha = 0.1) +\n  geom_smooth(method = \"lm\") +\n  labs(\n    x = \"Log of height (m)\",\n    y = \"Log of stem diameter (cm)\",\n    colour = \"Growth forms\"\n  ) +\n  theme_linedraw()\n```\n\nSee @fig-growth-formlm, @tbl-growth-glance and @tbl-growth-tidy for results.\n````\n\n## Citations & References\n\nAn excellent feature of Quarto with respect to writing scientific reports is the **native ability to include citations and references in your document.**\n\n### Including a bibliography\n\nThe first step to being able to add citations to a Quarto report is to **add a bibliography file.**\n\nQuarto supports bibliography files in a wide variety of formats including BibLaTeX and CSL.\n\nI've included `references.bib` in `data-raw/wood-survey-data-master` which contains a number of references in `BibTex` format:\n\n\n::: {.cell filename='data-raw/wood-survey-data-master/references.bib'}\n\n```{.r .cell-code}\n@misc{DP1.10098.001/provisional,\n  doi = {},\n  url = {https://data.neonscience.org/data-products/DP1.10098.001},\n  author = {{National Ecological Observatory Network (NEON)}},\n  language = {en},\n  title = {Vegetation structure (DP1.10098.001)},\n  publisher = {National Ecological Observatory Network (NEON)},\n  year = {2019}\n}\n@misc{forestry2012,\n  organization = {U.S. Forest Service},\n  title = {Forest Inventory and Analysis National Core Field Guide. Volume I: Field Data\nCollection Procedures for Phase 2 Plots},\n  volume = {1},\n  pages = {1-472},\n  year = {2012}\n}\n@article{Haase,\nauthor = {Haase, Diane},\nyear = {2008},\nmonth = {01},\npages = {24-30},\ntitle = {Understanding forest seedling quality: measurements and interpretation},\nvolume = {52},\njournal = {Tree Planters' Notes}\n}\n@article{THORNLEY1999195,\ntitle = {Modelling Stem Height and Diameter Growth in Plants},\njournal = {Annals of Botany},\nvolume = {84},\nnumber = {2},\npages = {195-205},\nyear = {1999},\nissn = {0305-7364},\ndoi = {https://doi.org/10.1006/anbo.1999.0908},\nurl = {https://www.sciencedirect.com/science/article/pii/S0305736499909083},\nauthor = {JOHN H.M. THORNLEY},\nkeywords = {Plant, stem, height, diameter, growth, model, forest, plantation, trees.},\nabstract = {A model of stem height and diameter growth in plants is developed. This is formulated and implemented within the framework of an existing tree plantation growth model: the ITE Edinburgh Forest Model. It is proposed that the height:diameter growth rate ratio is a function of a within-plant allocation ratio determined by the transport-resistance model of partitioning, multiplied by a foliage turgor pressure modifier. First it is demonstrated that the method leads to a stable long-term growth trajectory. Diurnal and seasonal dynamics are also examined. Predicted time courses over 20 years of stem mass, stem height, height:diameter ratio, and height:diameter growth rate ratio are presented for six treatments: control, high nitrogen, increased atmospheric carbon dioxide concentration, increased planting density, increased temperature and decreased rainfall. High nitrogen and increased temperature give initially higher stem height:diameter ratios, whereas high CO2gives an initially lower stem height:diameter ratio. However, the responses are complex, reflecting interactions between factors which often have opposing influences on height:diameter ratios, for example: stem density, competition for light and for nitrogen; carbon dioxide and decreased water stress; rainfall, leaching and nitrogen nutrition. The approach relates stem height and diameter growth variables via internal plant variables to environmental and management variables. Potentially, a coherent view of many observations which are sometimes in apparent conflict is provided. These aspects of plant growth can be considered more mechanistically than has hitherto been the case, providing an alternative to the empirical or teleonomic methods which have usually been employed.}\n}\n@article{CANNELL1984299,\ntitle = {Woody biomass of forest stands},\njournal = {Forest Ecology and Management},\nvolume = {8},\nnumber = {3},\npages = {299-312},\nyear = {1984},\nissn = {0378-1127},\ndoi = {https://doi.org/10.1016/0378-1127(84)90062-8},\nurl = {https://www.sciencedirect.com/science/article/pii/0378112784900628},\nauthor = {M.G.R. Cannell},\nabstract = {Published data on the total aboveground woody biomass (stems and branches), WT, of 640 forest and woodland stands around the world (Cannell, 1982) were divided into 32 species groups. Differences between groups were examined in the relationship: WT = F(HG) D, where F was a stand form factor; H was mean tree height; G was basal area at breast height; and D was mean wood basic specific gravity. WT was linearly related to (HG); broadleaved species, owing to their greater D, had greater regression coefficients than conifers. Regression coefficients and F factors tended to be smallest in groups having the smallest percentage biomass as branches and greatest in those having most branches. F factors of about 0.5 corresponded to groups having 5–10% branches. The shapes of the woody parts of trees in those groups would conform most closely to quadratic paraboloids as hypothesized by Dawkins (1963) and Gray (1966). But heavily branched broadleaved stands had F factors of 0.6–0.8, and the F factor of tapped Hevea rubber with 81% branches exceeded 1. Thus, for any given G and H, the greatest WT was contained in those forests which had the greatest proportion of branches.}\n}\n```\n:::\n\n\nTo **make the reference available to our document to cite**, we add the following to our YAML front matter:\n\n``` yaml\nbibliography: data-raw/wood-survey-data-master/references.bib\n```\n\nwhich should now look a bit like this:\n\n``` yaml\n---\ntitle: \"Analysis of NEON Woody plant vegetation structure data\"\nsubtitle: \"ACCE DTP course\"\nauthor: \"Anna Krystalli\"\ndate: \"2024-03-19\"\nformat:\n  html:\n    toc: true\n    theme: minty\n    highlight-style: dracula\n    code-overflow: wrap\n    df-print: paged\neditor: visual\nbibliography: data-raw/wood-survey-data-master/references.bib\n---\n```\n\n### Inserting citations\n\nWe can now use special citation notation to add citations to our document. It is best to do this in the visual editor as available references can be added interactively.\n\n-   `[@THORNLEY1999195; @CANNELL1984299]` renders to [@THORNLEY1999195; @CANNELL1984299]\n-   **Inline citation**: `@THORNLEY1999195` renders to @THORNLEY1999195\n\nQuarto will use Pandoc to automatically generate citations and add a bibliography section to the bottom of the document.\n\n### Task: Add citations to your Report.\n\n-   Substitute the placeholder citation in the `Background` section with a real citation from the `references.bib` file.\n-   Add a **Summary** section to the end of the report summarising our results and include some citations from the `references.bib` file.\n-   Re-render your report to insert the citations and create a bibliography section.\n\nSee more details about [citations and references](https://quarto.org/docs/authoring/footnotes-and-citations.html).\n\n\n## Final Report\n\nYour final report should look a bit like:\n\n\n::: {.cell filename='report.qmd'}\n::: {.cell-output .cell-output-stderr}\n\n````\n---\ntitle: \"Analysis of NEON Woody plant vegetation structure data\"\nsubtitle: \"ACCE DTP course\"\nauthor: \"Anna Krystalli\"\ndate: \"2024-03-19\"\nformat:\n  html:\n    toc: true\n    theme: minty\n    highlight-style: dracula\n    df-print: paged\neditor: visual\nbibliography: data-raw/wood-survey-data-master/references.bib\n---\n\n## Background\n\n![](data-raw/wood-survey-data-master/neon-logo.png){width=\"200\"}\n\nThe [NEON Woody plant vegetation structure dataset](https://data.neonscience.org/data-products/DP1.10098.001) [@DP1.10098.001/provisional] contains **structure measurements, including height, canopy diameter, and stem diameter, as well as mapped position of individual woody plants across the survey area.**\n\nThis data product contains the quality-controlled, native sampling resolution data from in-situ measurements of live and standing dead woody individuals and shrub groups, from all terrestrial NEON sites with qualifying woody vegetation. With some modifications, this protocol adopts guidelines established by the @forestry2012 for measuring tree species. The exact measurements collected per individual depend on growth form, and these measurements are focused on enabling biomass and productivity estimation, estimation of shrub volume and biomass, and calibration / validation of multiple NEON airborne remote-sensing data products.\n\nOur analyses focus on the **relationship between individual stem height and diameter** and how that relationship **varies across growth forms**.\n\n### Data Preparation\n\nData was prepared for analysis by:\n\n-   Compiling all individual raw data files into a single table.\n-   Merging individual data with plot level data and geolocating individuals.\n\nThe data preparation steps are contained in the `data-raw/individuals.R` script.\n\n## Summary statistics\n\nPrepared data were also subset to columns of interest `stem_diameter`, `height` and `growth_form` and records where `growth_form` values were not `\"liana\"` or missing.\n\n```{r}\n#| label: setup\n#| code-fold: true\n#| message: false\n## Setup ----\n# Load libraries\nlibrary(dplyr)\nlibrary(ggplot2)\n# Load data\nindividual <- readr::read_csv(\n  here::here(\"data\", \"individual.csv\")\n) %>%\n  select(stem_diameter, height, growth_form)\n\n## Subset analysis data ----\nanalysis_df <- individual %>%\n  filter(complete.cases(.), growth_form != \"liana\")\n\n## Order growth form levels\ngf_levels <- table(analysis_df$growth_form) %>%\n  sort() %>%\n  names()\nanalysis_df <- analysis_df %>%\n  mutate(growth_form = factor(growth_form,\n    levels = gf_levels\n  ))\n```\n\nThe final data set contains a total of **`{r} nrow(analysis_df)`**\n\n```{r}\n#| echo: false\n#| label: tbl-print\nanalysis_df\n```\n\n```{r}\n#| echo: false\n#| label: fig-growth-form-counts\n#| fig-cap: \"Distribution of individual counts across growth forms.\"\n\nanalysis_df %>%\n  ggplot(aes(\n    y = growth_form, colour = growth_form,\n    fill = growth_form\n  )) +\n  geom_bar(alpha = 0.5, show.legend = FALSE)\n\n```\n\n@fig-growth-form-counts shows the distribution of individual counts across growth forms in the dataset.\n\n```{r}\n#| echo: false\n#| label: fig-violin-plots\n#| fig-cap: \"Distribution of log stem_diameter and log height across growth forms\"\nanalysis_df %>%\n  tidyr::pivot_longer(\n    cols = c(stem_diameter, height),\n    names_to = \"var\",\n    values_to = \"value\"\n  ) %>%\n  ggplot(aes(\n    x = log(value), y = growth_form,\n    colour = growth_form, fill = growth_form\n  )) +\n  geom_violin(alpha = 0.5, trim = TRUE, show.legend = FALSE) +\n  geom_boxplot(alpha = 0.7, show.legend = FALSE) +\n  facet_grid(~var) +\n  theme_linedraw()\n```\n\n@fig-violin-plots shows the log distribution of stem diameter and log height across growth forms.\n\n# Analysis\n\n## Modelling overall `stem_diameter` as a function of `height`\n\nInitially we fit a linear model of form `log(stem_diameter)` as a function of `log(height)`\n\n```{r}\nlm_overall <- lm(\n  log(stem_diameter) ~ log(height),\n  analysis_df\n)\n```\n\n```{r}\n#| echo: false\n#| tbl-cap: \"Overall model evaluation\"\n#| label: tbl-overall-glance\nlibrary(gt)\nlm_overall |> \n  broom::glance() |> \n  gt() |>\n  fmt_number(decimals = 2)\n```\n\n```{r}\n#| echo: false\n#| tbl-cap: \"Overall model coefficents\"\n#| label: tbl-overall-tidy\nlibrary(gt)\nlm_overall |> broom::tidy() |> \n  gt() |>\n  fmt_number(decimals = 4) |>\n  tab_style_body(\n    columns = \"p.value\",\n    style = cell_text(weight = \"bold\"),\n    fn = function(x) x < 0.05\n  )\n```\n\n```{r}\n#| echo: false\n#| fig-cap: \"Relationship between stem diameter and height across all data.\"\n#| label: fig-overall-lm\nanalysis_df %>%\n  ggplot(aes(x = log(height), y = log(stem_diameter))) +\n  geom_point(alpha = 0.2) +\n  geom_smooth(method = \"lm\") +\n  xlab(\"Log of height (m)\") +\n  ylab(\"Log of stem diameter (cm)\") +\n  theme_linedraw()\n\n```\n\nSee @fig-overall-lm, @tbl-overall-glance and @tbl-overall-tidy for results.\n\n### Growth form level analysis\n\nWe also fit a model with an interaction term with growth form included.\n\n```{r}\nlm_growth <- lm(\n  log(stem_diameter) ~ log(height) * growth_form,\n  analysis_df\n)\n```\n\n```{r}\n#| echo: false\n#| tbl-cap: \"Growth Form interaction model evaluation\"\n#| label: tbl-growth-glance\nlibrary(gt)\nlm_growth |> broom::glance() |> gt() |>\n  fmt_number(decimals = 2)\n```\n\n```{r}\n#| echo: false\n#| tbl-cap: \"Growth Form interaction model coefficents\"\n#| label: tbl-growth-tidy\nlibrary(gt)\nlm_growth |> broom::tidy() |> gt() |>\n  fmt_number(decimals = 4) |>\n  tab_style_body(\n    columns = \"p.value\",\n    style = cell_text(weight = \"bold\"),\n    fn = function(x) x < 0.05\n  )\n```\n\n```{r}\n#| echo: false\n#| fig-cap: \"Relationship between stem diameter and height across growth forms.\"\n#| label: fig-growth-formlm\nanalysis_df %>%\n  ggplot(aes(x = log(height), y = log(stem_diameter), colour = growth_form)) +\n  geom_point(alpha = 0.1) +\n  geom_smooth(method = \"lm\") +\n  labs(\n    x = \"Log of height (m)\",\n    y = \"Log of stem diameter (cm)\",\n    colour = \"Growth forms\"\n  ) +\n  theme_linedraw()\n```\n\nSee @fig-growth-formlm, @tbl-growth-glance and @tbl-growth-tidy for results.\n\n## Summary\n\nOur results follow findings in the literature e.g @THORNLEY1999195, @CANNELL1984299 and @Haase.\n````\n\n\n:::\n:::\n\n\nand render to something that looks like this:\n\n\n::: {.cell}\n<iframe src=\"https://annakrystalli-personal.quarto.pub/analysis-of-neon-woody-plant-vegetation-structure-data/\" width=\"672\" height=\"400px\" data-external=\"1\"></iframe>\n:::\n\n\n## Publish to Quarto Pub\n\nTo publish to Quarto Pub use the following command in the RStudio Terminal:\n\n\n::: {.cell filename='Terminal'}\n\n```{.bash .cell-code}\nquarto publish quarto-pub report.qmd\n```\n:::\n\n\nFind out [more about publishing options](https://quarto.org/docs/publishing/).\n",
    "supporting": [
      "06c_code-chunks_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}